## Island

**Автор:** Кузнецов Иван Сергеевич

## Идея

Создать 2d survival с возможностью создавать автоматизированную базу, связанную с другими островами.

## Реализация

 - В папке saves лежат пронумерованные папки с 2 файлами, в которых лежат двумерные 
   массивы с типом тайлов и объектов, и файлом с координатами чанка, на котором находится персонаж, и координатами персонажа в этом чанке.
 - В папке scripts лежат файлы с кодом.
	 1. в файле button.py лежит класс для всех кнопок. В будущем он будет родительским классом для других копок.
	2. в файле objects.py лежит класс Object, который является родительским классом для всех объектов
	3. в файле creatures.py лежит класс Hero для работы с персонажем
	4. в файле cycles.py лежат:
			 класс Sprite  GroupsForChunks для хранения групп спрайтов,
			 функции menu_cycle  и game_cycle для запуска соответствующих игровых циклов
	5.  в файле world.py лежит класс World, который создаёт и загружает мир, а также 	может создавать миникарту
	6. В файле save_game.py лежат функции для загрузки и создания карты


## Используемые технологии

 - Библиотека pygame

 - Библиотека pynoise

  - Библиотека os

  - Работа с файлами

  - exe файл

 
## Инструкция и принцип работы

Если вы хотите открыть игру не через exe файл, то после скачивания библиотеки pynoise
в файле gpu.py этой библиотеки в строчках 34 и 51 нужно приписать "_" к "enqueue_read_buffer" в начало.

Сама игра работает следующим образом. Создаётся двумерный массив чисел с типом numpy.float64. 
Для тайлов  числа от -1 до -0.2 соответствуют тайлам воды, числа от -0.2 до 0 соответствуют тайлам песка, число 0 соответствует тайлам травы.
Для объектов  числа от -1 до 0.2 не соответствуют ни одному объекту, числа от 0.2 до 0.5 соответствуют деревьям, числа больше 0.5 соответствуют валунам.

Вся карта поделена на области размером с экран(далее чанки). При создании мира определяются координаты чанка, на котором заспавнится персонаж, и координаты
персонажа внутри этого чанка. То-есть координаты персонажа будут в пределах от 0 до 1920 по x и от 0 до 1080 по y, если размеры экрана будут 1920x1080.
Поскольку карта очень большая, её нельзя отрисовать целиком на экране, а потом перемещать её по экрану для эффекта камеры. Поэтому вместо всей карты
отрисовываются и перемещаются по экрану лишь 9 чанков вокруг персонажа. Переменные camera_x и camera_y хранят координаты левого верхнего чанка на дисплее.
Каждому из 9 чанков соответствуют свои группы спрайтов.

Если левый верхний чанк полностью ушёл за границы экрана (то-есть координаты его верхнего левого угла  либо меньше размера экрана по x или по y, либо больше 0),
то первые 3 чанка по направлению движения  камеры полностью обновляют свои группы спрайтов, а остальные 6 чанков меняют свои группы спрайтов  на группу спрайтов соседа
по направлению движения камеры. Соответственно меняется и главный чанк по направлению движения камеры. Главный или центральный чанк - это чанк, на котором находится
персонаж. В конце все группы спрайтов отрисовываюся на своих чанках, а положение камеры смещается к персонажу на главном чанке.

Спрайт персонажа отрисовывается на дисплее после перемещения чанков по экрану.
Персонаж не привязан к матрице, поэтому может свободно перемещаться.
